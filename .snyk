# ============================================
# Galeria - Snyk Configuration
# ============================================
# Dependency vulnerability scanning and monitoring

# Snyk policy configuration
# See https://snyk.io/docs/policy for more information

version: v1.0.0

# Exclude specific vulnerabilities (use sparingly!)
# Only exclude if you have a valid mitigation or if it's a false positive
exclude:
  # Example: Exclude a specific CVE with explanation
  # SNYK-JS-LODASH-567790:
  #   reason: "Internal tool only, not exposed to external requests"
  #   expires: "2025-12-31T23:59:59Z"

# Severity threshold for failing builds
# Options: low, medium, high, critical
severity:
  # Fail if vulnerabilities at or above this severity are found
  threshold: high

# Vulnerability filters
filters:
  # Exclude development dependencies from severity checks
  # (recommended for faster builds, but be careful!)
  devDependencies: false

  # Exclude specific types of vulnerabilities
  # (use with caution - only if you have proper mitigation)
  types:
    - # License issues (not security vulnerabilities)
      # Uncomment to exclude license violations:
      # - license

# Language-specific settings
languages:
  javascript:
    # Scan for JavaScript/TypeScript specific vulnerabilities
    enabled: true

    # Build tools used in your project
    buildTools:
      - nextjs
      - webpack
      - typescript

# Project-specific settings
# These settings apply to all projects in your Snyk organization
project:
  # Tags for organizing projects
  tags:
    - production
    - galeria
    - multi-tenant
    - saas

  # Business criticality (helps prioritize vulnerability remediation)
  criticality:
    level: high
    # business_unit: "engineering"
    # owner: "security-team"

  # Lifecycle settings
  lifecycle:
    # How often to scan for new vulnerabilities
    scanFrequency: daily

    # Auto-deploy (not recommended for production)
    # autoDeploy: false

# Integration settings
# These settings configure how Snyk integrates with your CI/CD
integrations:
  github:
    # Enable GitHub integration
    enabled: true

    # Automatically open pull requests for vulnerability fixes
    prAutoRemediation: true

    # Maximum number of PRs to open at once
    prRemediationThreshold: 5

    # Branch protection settings
    branchProtection:
      # Require vulnerability checks before merge
      requiredStatusChecks:
        - "Snyk security scan"

  # CI/CD integrations
  circleci:
    enabled: false

  travisci:
    enabled: false

  jenkins:
    enabled: false

# Monitoring settings
monitoring:
  # Enable continuous monitoring for new vulnerabilities
  enabled: true

  # Notification settings
  notifications:
    # Send email notifications for new vulnerabilities
    email: true

    # Slack integration
    # slack:
    #   enabled: false
    #   webhookUrl: "https://hooks.slack.com/services/YOUR/WEBHOOK/URL"

    # Microsoft Teams integration
    # teams:
    #   enabled: false
    #   webhookUrl: "YOUR_TEAMS_WEBHOOK_URL"

# Reporting settings
reporting:
  # Generate SARIF reports for GitHub security tab
  sarif:
    enabled: true

  # Generate JSON reports for custom tooling
  json:
    enabled: false
    # filePath: "snyk-report.json"

# Custom policies
# These policies allow you to enforce custom rules beyond Snyk's standard policies
policies:
  # Example: Block packages with specific licenses
  # - id: "no-gpl"
  #   description: "Block packages with GPL licenses"
  #   enforcement: "block"
  #   rules:
  #     - licenses:
  #         - "GPL*"
  #         - "AGPL*"

  # Example: Require maintainers for production packages
  # - id: "require-maintainer"
  #   description: "Require packages with active maintainers"
  #   enforcement: "warn"
  #   rules:
  #     - unmaintained: true

  # Example: Block packages with known security issues
  # - id: "block-suspicious-packages"
  #   description: "Block packages flagged as suspicious"
  #   enforcement: "block"
  #   rules:
  #     - attributes:
  #         - suspicious: true
